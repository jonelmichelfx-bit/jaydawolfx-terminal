<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JAYDAWOLFX ‚Äî AI Chart Analysis</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    :root{
      --bg:#080c0f;--surface:#0f1923;--surface2:#141c24;
      --border:#2a3f52;--border2:#34506a;
      --green:#00ff99;--red:#ff4466;--yellow:#ffe033;
      --cyan:#33ddff;--purple:#a855f7;--orange:#ff7744;
      --text:#ffffff;--text2:#c0d8e8;--text3:#90b8d0;
      --font:'Share Tech Mono',monospace;
    }
    body{background:var(--bg);color:var(--text);font-family:var(--font);min-height:100vh;padding:0;}
    body::before{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,255,153,0.015) 2px,rgba(0,255,153,0.015) 4px);pointer-events:none;z-index:0;}

    /* NAV */
    .nav{position:fixed;top:0;left:0;right:0;z-index:9999;background:rgba(8,12,15,0.97);border-bottom:1px solid var(--border);padding:10px 24px;display:flex;align-items:center;justify-content:space-between;backdrop-filter:blur(10px);}
    .nav-left{display:flex;align-items:center;gap:10px;}
    .nav-logo{font-size:20px;}
    .nav-title{color:var(--green);font-weight:bold;letter-spacing:2px;font-size:13px;}
    .nav-links{display:flex;align-items:center;gap:10px;}
    .nav-btn{padding:7px 14px;border-radius:4px;font-family:var(--font);font-size:11px;font-weight:bold;letter-spacing:1px;text-decoration:none;border:none;cursor:pointer;}
    .nav-back{background:transparent;border:1px solid var(--border);color:var(--text2);}
    .nav-back:hover{border-color:var(--cyan);color:var(--cyan);}
    .nav-scanner{background:#7c3aed;color:white;}
    .nav-scanner:hover{background:#6d28d9;}

    /* MAIN */
    .main{position:relative;z-index:1;max-width:1000px;margin:0 auto;padding:100px 24px 40px;}

    /* HEADER */
    .page-header{text-align:center;margin-bottom:36px;}
    .page-icon{font-size:48px;margin-bottom:12px;filter:drop-shadow(0 0 20px rgba(51,221,255,0.5));}
    .page-title{font-size:26px;font-weight:bold;color:var(--cyan);letter-spacing:4px;text-shadow:0 0 30px rgba(51,221,255,0.4);margin-bottom:6px;}
    .page-sub{font-size:12px;color:var(--text3);letter-spacing:2px;}

    /* SEARCH */
    .search-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px;margin-bottom:28px;position:relative;}
    .search-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--cyan),transparent);border-radius:10px 10px 0 0;}
    .search-row{display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;}
    .ticker-input{flex:1;min-width:150px;padding:14px 18px;background:var(--surface2);border:1px solid var(--border);border-radius:6px;color:var(--text);font-family:var(--font);font-size:18px;font-weight:bold;letter-spacing:3px;outline:none;text-transform:uppercase;}
    .ticker-input:focus{border-color:var(--cyan);box-shadow:0 0 15px rgba(51,221,255,0.15);}
    .ticker-input::placeholder{color:var(--text3);font-size:14px;letter-spacing:1px;}
    .btn-analyze{background:linear-gradient(135deg,var(--cyan),#0088aa);color:#000;padding:14px 28px;border:none;border-radius:6px;font-family:var(--font);font-size:13px;font-weight:bold;letter-spacing:2px;cursor:pointer;transition:all 0.2s;white-space:nowrap;}
    .btn-analyze:hover{box-shadow:0 0 25px rgba(51,221,255,0.5);transform:translateY(-1px);}
    .btn-analyze:disabled{opacity:0.4;cursor:not-allowed;transform:none;}

    .quick-tickers{display:flex;flex-wrap:wrap;gap:8px;}
    .quick-tag{background:var(--surface2);border:1px solid var(--border);border-radius:20px;padding:5px 14px;font-size:11px;color:var(--text2);cursor:pointer;transition:all 0.2s;letter-spacing:1px;}
    .quick-tag:hover{border-color:var(--cyan);color:var(--cyan);}

    /* ANALYSIS RESULT */
    .result-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;overflow:hidden;display:none;}
    .result-card.visible{display:block;}

    .result-header{padding:20px 26px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;}
    .result-ticker{font-size:36px;font-weight:bold;color:var(--cyan);letter-spacing:3px;}
    .result-price{text-align:right;}
    .price-current{font-size:28px;font-weight:bold;color:var(--yellow);}
    .price-change{font-size:14px;margin-top:3px;}
    .price-up{color:var(--green);}
    .price-dn{color:var(--red);}

    /* SIGNAL BANNER */
    .signal-banner{padding:18px 26px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;}
    .signal-banner.bullish{background:rgba(0,255,153,0.08);border-bottom:1px solid rgba(0,255,153,0.2);}
    .signal-banner.bearish{background:rgba(255,68,102,0.08);border-bottom:1px solid rgba(255,68,102,0.2);}
    .signal-banner.neutral{background:rgba(255,224,51,0.08);border-bottom:1px solid rgba(255,224,51,0.2);}
    .signal-main{display:flex;align-items:center;gap:14px;}
    .signal-icon{font-size:32px;}
    .signal-text{font-size:20px;font-weight:bold;letter-spacing:3px;}
    .signal-banner.bullish .signal-text{color:var(--green);}
    .signal-banner.bearish .signal-text{color:var(--red);}
    .signal-banner.neutral .signal-text{color:var(--yellow);}
    .signal-desc{font-size:13px;color:var(--text2);margin-top:4px;}
    .confidence-box{text-align:center;}
    .confidence-num{font-size:36px;font-weight:bold;}
    .signal-banner.bullish .confidence-num{color:var(--green);}
    .signal-banner.bearish .confidence-num{color:var(--red);}
    .signal-banner.neutral .confidence-num{color:var(--yellow);}
    .confidence-label{font-size:10px;color:var(--text3);letter-spacing:2px;}

    /* BODY */
    .result-body{padding:24px 26px;}
    .analysis-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;}
    .analysis-box{background:var(--surface2);border-radius:8px;padding:16px;}
    .analysis-box-label{font-size:10px;color:var(--text3);letter-spacing:2px;margin-bottom:10px;}
    .analysis-box-value{font-size:14px;color:var(--text);line-height:1.7;}

    .analysis-box.trend{border-left:3px solid var(--cyan);}
    .analysis-box.levels{border-left:3px solid var(--yellow);}
    .analysis-box.prediction{border-left:3px solid var(--green);}
    .analysis-box.risk{border-left:3px solid var(--red);}

    .level-row{display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-bottom:1px solid rgba(255,255,255,0.05);}
    .level-row:last-child{border-bottom:none;}
    .level-name{font-size:11px;color:var(--text3);}
    .level-val{font-size:13px;font-weight:bold;}
    .level-val.resistance{color:var(--red);}
    .level-val.support{color:var(--green);}
    .level-val.target{color:var(--yellow);}

    /* OPTIONS REC */
    .options-section{margin-top:20px;}
    .options-title{font-size:11px;color:var(--text3);letter-spacing:2px;margin-bottom:14px;padding-bottom:8px;border-bottom:1px solid var(--border);}
    .options-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
    .option-rec{background:var(--surface2);border-radius:8px;padding:16px;position:relative;overflow:hidden;}
    .option-rec.call{border:1px solid rgba(0,255,153,0.3);}
    .option-rec.call::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--green);}
    .option-rec.put{border:1px solid rgba(255,68,102,0.3);}
    .option-rec.put::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--red);}
    .option-type{font-size:14px;font-weight:bold;letter-spacing:2px;margin-bottom:10px;}
    .option-rec.call .option-type{color:var(--green);}
    .option-rec.put .option-type{color:var(--red);}
    .option-detail{font-size:12px;color:var(--text2);line-height:1.9;}
    .option-detail span{color:var(--yellow);font-weight:bold;}

    /* SUMMARY */
    .summary-box{background:var(--surface2);border-radius:8px;padding:18px;margin-top:16px;border-left:3px solid var(--purple);}
    .summary-label{font-size:10px;color:var(--purple);letter-spacing:2px;margin-bottom:10px;}
    .summary-text{font-size:13px;color:var(--text);line-height:1.8;}

    /* LOADING */
    .loading{text-align:center;padding:60px 20px;}
    .loading-icon{font-size:44px;animation:bounce 1s ease-in-out infinite;margin-bottom:16px;}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
    .loading-text{font-size:14px;color:var(--cyan);letter-spacing:2px;margin-bottom:8px;}
    .loading-sub{font-size:12px;color:var(--text3);margin-bottom:20px;}
    .loading-bar{width:220px;height:2px;background:var(--border);margin:0 auto;border-radius:2px;overflow:hidden;}
    .loading-fill{height:100%;background:var(--cyan);animation:load 1.5s ease-in-out infinite;}
    @keyframes load{0%{width:0;margin-left:0}50%{width:100%;margin-left:0}100%{width:0;margin-left:100%}}

    .alert{padding:13px 16px;border-radius:6px;font-size:13px;margin-bottom:20px;display:none;}
    .alert.error{background:rgba(255,68,102,0.1);border:1px solid rgba(255,68,102,0.3);color:var(--red);}

    .disclaimer{margin-top:24px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:6px;font-size:11px;color:var(--text3);text-align:center;line-height:1.7;}

    @media(max-width:600px){
      .analysis-grid{grid-template-columns:1fr;}
      .options-grid{grid-template-columns:1fr;}
      .result-header{flex-direction:column;}
    }
  </style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav-left">
    <span class="nav-logo">üê∫</span>
    <span class="nav-title">WOLF ELITE</span>
  </div>
  <div class="nav-links">
    <a href="/" class="nav-btn nav-back">‚Üê TERMINAL</a>
    <a href="/ai-scanner" class="nav-btn nav-scanner">ü§ñ AI SCANNER</a>
  </div>
</nav>
<!-- LIVE MARKET STATUS BAR -->
<div id="market-bar" style="background:rgba(8,12,15,0.95);border-bottom:1px solid #2a3f52;padding:5px 24px;display:flex;align-items:center;justify-content:space-between;font-size:11px;position:fixed;top:44px;left:0;right:0;z-index:9998;">
  <div style="display:flex;align-items:center;gap:16px;">
    <span style="color:#90b8d0;letter-spacing:1px;">üïê <span id="live-time" style="color:#33ddff;">--:--:--</span></span>
    <span style="color:#90b8d0;letter-spacing:1px;">üìÖ <span id="live-date" style="color:#ffffff;">--</span></span>
  </div>
  <div style="display:flex;align-items:center;gap:6px;">
    <div id="market-dot" style="width:8px;height:8px;border-radius:50%;background:#ff4466;animation:pulse 2s infinite;"></div>
    <span id="market-status" style="color:#ff4466;font-weight:bold;letter-spacing:1px;">LOADING...</span>
  </div>
</div>
<style>@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}</style>
<script>
function updateMarketBar(){fetch("/api/server-time").then(r=>r.json()).then(d=>{
  document.getElementById("live-time").textContent=d.time;
  document.getElementById("live-date").textContent=d.date;
  document.getElementById("market-status").textContent=d.market_status;
  document.getElementById("market-status").style.color=d.status_color;
  document.getElementById("market-dot").style.background=d.status_color;
}).catch(()=>{});}
updateMarketBar();setInterval(updateMarketBar,30000);
</script>

<div class="main">

  <!-- HEADER -->
  <div class="page-header">
    <div class="page-icon">üìä</div>
    <div class="page-title">AI CHART ANALYSIS</div>
    <div class="page-sub">POWERED BY CLAUDE AI ‚Äî REAL-TIME MARKET INTELLIGENCE</div>
  </div>

  <!-- SEARCH -->
  <div class="search-card">
    <div class="search-row">
      <input type="text" class="ticker-input" id="ticker-input" placeholder="ENTER TICKER (e.g. SPY)" maxlength="10"/>
      <button class="btn-analyze" id="analyze-btn" onclick="analyzeTicker()">üìä ANALYZE</button>
    </div>
    <div class="quick-tickers">
      <span class="quick-tag" onclick="quickAnalyze('SPY')">üìà SPY</span>
      <span class="quick-tag" onclick="quickAnalyze('QQQ')">üíª QQQ</span>
      <span class="quick-tag" onclick="quickAnalyze('NVDA')">ü§ñ NVDA</span>
      <span class="quick-tag" onclick="quickAnalyze('TSLA')">‚ö° TSLA</span>
      <span class="quick-tag" onclick="quickAnalyze('AAPL')">üçé AAPL</span>
      <span class="quick-tag" onclick="quickAnalyze('AMD')">üíæ AMD</span>
      <span class="quick-tag" onclick="quickAnalyze('META')">üëÅ META</span>
      <span class="quick-tag" onclick="quickAnalyze('AMZN')">üì¶ AMZN</span>
      <span class="quick-tag" onclick="quickAnalyze('MSFT')">ü™ü MSFT</span>
      <span class="quick-tag" onclick="quickAnalyze('GOOGL')">üîç GOOGL</span>
      <span class="quick-tag" onclick="quickAnalyze('COIN')">‚Çø COIN</span>
      <span class="quick-tag" onclick="quickAnalyze('PLTR')">üõ° PLTR</span>
    </div>
  </div>

  <div id="alert" class="alert error"></div>

  <!-- LOADING -->
  <div class="loading" id="loading" style="display:none">
    <div class="loading-icon">üìä</div>
    <div class="loading-text" id="loading-text">ANALYZING...</div>
    <div class="loading-sub">Claude AI is processing price data, trends, and signals</div>
    <div class="loading-bar"><div class="loading-fill"></div></div>
  </div>

  <!-- RESULT -->
  <div class="result-card" id="result-card">

    <div class="result-header">
      <div>
        <div class="result-ticker" id="res-ticker">SPY</div>
        <div style="font-size:12px;color:var(--text3);margin-top:4px;" id="res-company"></div>
      </div>
      <div class="result-price">
        <div class="price-current" id="res-price">-</div>
        <div class="price-change" id="res-change"></div>
      </div>
    </div>

    <div class="signal-banner" id="signal-banner">
      <div class="signal-main">
        <div class="signal-icon" id="signal-icon">üìà</div>
        <div>
          <div class="signal-text" id="signal-text">BULLISH</div>
          <div class="signal-desc" id="signal-desc"></div>
        </div>
      </div>
      <div class="confidence-box">
        <div class="confidence-num" id="confidence-num">85%</div>
        <div class="confidence-label">CONFIDENCE</div>
      </div>
    </div>

    <div class="result-body">

      <div class="analysis-grid">
        <div class="analysis-box trend">
          <div class="analysis-box-label">üìà TREND ANALYSIS</div>
          <div class="analysis-box-value" id="res-trend"></div>
        </div>
        <div class="analysis-box levels">
          <div class="analysis-box-label">üéØ KEY LEVELS</div>
          <div id="res-levels"></div>
        </div>
        <div class="analysis-box prediction">
          <div class="analysis-box-label">üîÆ 5-10 DAY PREDICTION</div>
          <div class="analysis-box-value" id="res-prediction"></div>
        </div>
        <div class="analysis-box risk">
          <div class="analysis-box-label">‚ö† RISKS TO WATCH</div>
          <div class="analysis-box-value" id="res-risk"></div>
        </div>
      </div>

      <div class="options-section">
        <div class="options-title">üéØ OPTIONS RECOMMENDATIONS</div>
        <div class="options-grid">
          <div class="option-rec call">
            <div class="option-type">üìà CALL OPTION</div>
            <div class="option-detail" id="res-call"></div>
          </div>
          <div class="option-rec put">
            <div class="option-type">üìâ PUT OPTION</div>
            <div class="option-detail" id="res-put"></div>
          </div>
        </div>
      </div>

      <div class="summary-box">
        <div class="summary-label">üê∫ WOLF AI SUMMARY</div>
        <div class="summary-text" id="res-summary"></div>
      </div>

    </div>
  </div>

  <div class="disclaimer" id="disclaimer" style="display:none">
    ‚ö†Ô∏è AI analysis is for informational purposes only. Not financial advice. Always do your own research before trading.
  </div>

</div>

<script>
window.onload = () => {
  document.getElementById('ticker-input').addEventListener('keydown', e => {
    if (e.key === 'Enter') analyzeTicker();
  });
  document.getElementById('ticker-input').addEventListener('input', e => {
    e.target.value = e.target.value.toUpperCase();
  });
};

function quickAnalyze(ticker) {
  document.getElementById('ticker-input').value = ticker;
  analyzeTicker();
}

async function analyzeTicker() {
  const ticker = document.getElementById('ticker-input').value.trim().toUpperCase();
  if (!ticker) { showAlert('Please enter a ticker symbol.'); return; }

  hideAlert();
  showLoading(`ANALYZING ${ticker}...`);
  document.getElementById('result-card').classList.remove('visible');
  document.getElementById('disclaimer').style.display = 'none';
  document.getElementById('analyze-btn').disabled = true;

  try {
    const res = await fetch('/scanner/analyze-chart', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ ticker })
    });

    const data = await res.json();
    if (!res.ok) { showAlert(data.error || 'Analysis failed. Try again.'); hideLoading(); document.getElementById('analyze-btn').disabled = false; return; }

    renderAnalysis(data);
    hideLoading();
    document.getElementById('analyze-btn').disabled = false;
    document.getElementById('disclaimer').style.display = 'block';

  } catch(e) {
    showAlert('Connection error. Try again.');
    hideLoading();
    document.getElementById('analyze-btn').disabled = false;
  }
}

function renderAnalysis(d) {
  const isBullish = d.signal === 'BULLISH';
  const isBearish = d.signal === 'BEARISH';

  document.getElementById('res-ticker').textContent = d.ticker;
  document.getElementById('res-company').textContent = d.company || '';

  if (d.current_price) {
    document.getElementById('res-price').textContent = '$' + d.current_price;
    if (d.change_pct !== undefined) {
      const up = d.change_pct >= 0;
      document.getElementById('res-change').innerHTML = `<span class="${up?'price-up':'price-dn'}">${up?'+':''}${d.change_pct}% TODAY</span>`;
    }
  }

  // Signal banner
  const banner = document.getElementById('signal-banner');
  banner.className = 'signal-banner ' + (isBullish?'bullish':isBearish?'bearish':'neutral');
  document.getElementById('signal-icon').textContent = isBullish?'üöÄ':isBearish?'üîª':'‚öñÔ∏è';
  document.getElementById('signal-text').textContent = d.signal;
  document.getElementById('signal-desc').textContent = d.signal_reason || '';
  document.getElementById('confidence-num').textContent = d.confidence + '%';

  document.getElementById('res-trend').textContent = d.trend;
  document.getElementById('res-prediction').textContent = d.prediction;
  document.getElementById('res-risk').textContent = d.risks;

  // Key levels
  const levelsEl = document.getElementById('res-levels');
  levelsEl.innerHTML = '';
  if (d.resistance) levelsEl.innerHTML += `<div class="level-row"><span class="level-name">üî¥ RESISTANCE</span><span class="level-val resistance">$${d.resistance}</span></div>`;
  if (d.support) levelsEl.innerHTML += `<div class="level-row"><span class="level-name">üü¢ SUPPORT</span><span class="level-val support">$${d.support}</span></div>`;
  if (d.price_target) levelsEl.innerHTML += `<div class="level-row"><span class="level-name">üéØ TARGET</span><span class="level-val target">$${d.price_target}</span></div>`;
  if (d.stop_loss) levelsEl.innerHTML += `<div class="level-row"><span class="level-name">üõë STOP LOSS</span><span class="level-val resistance">$${d.stop_loss}</span></div>`;

  // Options
  document.getElementById('res-call').innerHTML = d.call_option || 'N/A';
  document.getElementById('res-put').innerHTML = d.put_option || 'N/A';
  document.getElementById('res-summary').textContent = d.summary;

  document.getElementById('result-card').classList.add('visible');
  document.getElementById('result-card').scrollIntoView({behavior:'smooth', block:'start'});
}

function showLoading(text) {
  document.getElementById('loading-text').textContent = text;
  document.getElementById('loading').style.display = 'block';
}
function hideLoading() { document.getElementById('loading').style.display = 'none'; }
function showAlert(msg) { const e = document.getElementById('alert'); e.textContent = msg; e.style.display = 'block'; }
function hideAlert() { document.getElementById('alert').style.display = 'none'; }
</script>
</body>
</html>
